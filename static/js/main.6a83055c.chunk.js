/*! For license information please see main.6a83055c.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-anime-timeline"]=this["webpackJsonpmy-anime-timeline"]||[]).push([[0],{14:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(6),i=a.n(o);a(14);const c=l.a.memo(({links:e})=>{const t=[];for(let a=0;a<e.length;++a){const[n,o]=e[a],i=a===e.length-1;t.push(l.a.createElement(l.a.Fragment,{key:"link-".concat(a)},l.a.createElement("a",{href:n},o),i?"":", "))}return l.a.createElement("p",null,"Links if something is broken: ",t)});var s=a(7),r=a.n(s),m=a(8),d=a.n(m);let u;!function(e){e.Anime="anime",e.Manga="manga"}(u||(u={}));const p=[u.Anime,u.Manga];let g;!function(e){e.Completed="completed",e.PlanToWatch="plan_to_watch",e.Watching="watching"}(g||(g={}));const h=e=>{e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},y=()=>({username:h("username"),listType:h("list_type"),cap:Math.round(Number(h("cap"))),displayType:h("display_type")}),E=e=>e<10?"0"+e:e.toString(),v=e=>e.getFullYear()+"-"+E(e.getMonth()+1)+"-"+E(e.getDate());var b=a(2),f=a.n(b);let k;!function(e){e.Point="point",e.Box="box",e.Range="range"}(k||(k={}));const x=[k.Point,k.Box,k.Range],_=l.a.memo(()=>{const e=y(),t=e.username,a=e.listType===u.Manga?u.Manga:u.Anime,n=1e3===e.cap;let o=e.displayType;x.includes(o)||(o=k.Box);const[i,c]=l.a.useState(t),[s,r]=l.a.useState(a),[m,d]=l.a.useState(n),[p,g]=l.a.useState(o);return l.a.createElement("form",null,l.a.createElement("div",{className:"username-input"},l.a.createElement("label",{htmlFor:"username"},"Enter your username:"),l.a.createElement("input",{type:"text",id:"username",name:"username",required:!0,placeholder:"e.g. Timbo_KZ",value:i,onChange:e=>c(e.target.value)})),l.a.createElement("div",{className:"radio-column-wrapper"},l.a.createElement("div",{className:"radio-column"},l.a.createElement("div",{className:"column-title"},"List type:"),l.a.createElement("input",{type:"radio",id:"radio-anime",name:"list_type",value:u.Anime,checked:s===u.Anime,onChange:()=>r(u.Anime)}),l.a.createElement("label",{htmlFor:"radio-anime"},"Anime list"),l.a.createElement("input",{type:"radio",id:"radio-manga",name:"list_type",value:u.Manga,checked:s===u.Manga,onChange:()=>r(u.Manga)}),l.a.createElement("label",{htmlFor:"radio-manga"},"Manga list"),l.a.createElement("hr",null),l.a.createElement("input",{type:"checkbox",id:"checkbox-cap",name:"cap",value:"1000",checked:m,onChange:e=>d(e.target.checked)}),l.a.createElement("label",{htmlFor:"checkbox-cap"},"Cap at 1000 titles"))),l.a.createElement("div",{className:"radio-column-wrapper"},l.a.createElement("div",{className:"radio-column"},l.a.createElement("div",{className:"column-title"},"Display type:"),l.a.createElement("input",{type:"radio",id:"radio-point",name:"display_type",value:k.Point,checked:p===k.Point,onChange:()=>g(k.Point)}),l.a.createElement("label",{htmlFor:"radio-point"},"Point"),l.a.createElement("input",{type:"radio",id:"radio-box",name:"display_type",value:k.Box,checked:p===k.Box,onChange:()=>g(k.Box)}),l.a.createElement("label",{htmlFor:"radio-box"},"Box"),l.a.createElement("input",{type:"radio",id:"radio-range",name:"display_type",value:k.Range,checked:p===k.Range,onChange:()=>g(k.Range)}),l.a.createElement("label",{htmlFor:"radio-range"},"Range (duration)"))),l.a.createElement("input",{className:"go",type:"submit",value:"Go!"}))});var C=function(){const[e,t]=l.a.useState(!0),[a,o]=l.a.useState("Enter your MAL credentials!");Object(n.useEffect)(()=>{let{username:e,listType:t,cap:a,displayType:n}=y();e&&t&&n&&(p.includes(t)&&x.includes(n)?(o("Loading ".concat(e,"'s ").concat(t," list...")),((e,t)=>{const a=encodeURI("/v1?username=".concat(e,"&list_type=").concat(t)),n="".concat("https://wkup5ts6yk.execute-api.eu-west-2.amazonaws.com").concat(a);return d.a.resolve().then(()=>r.a.get(n).accept("application/json")).then(e=>(e.status,e.body.list_entries))})(e,t).then(e=>{const t=(e=>{const t=[];for(let a=0;a<e.length;a++){const n=e[a],l=n.node,o=n.list_status;if(n.list_status.status!==g.Completed)continue;let i=null,c=null;i=o.start_date&&!o.start_date.startsWith("0000-00-00")?new Date(o.start_date):new Date(o.updated_at),c=o.finish_date&&!o.finish_date.startsWith("0000-00-00")?new Date(o.finish_date):f()(i).add(1,"day").toDate(),c<i&&([i,c]=[c,i]),i.toUTCString()===c.toUTCString()&&(c=f()(i).add(1,"day").toDate());const s={id:a,content:l.title,start:v(i),end:v(c)};t.push(s)}return t.sort((e,t)=>t.end.localeCompare(e.end))})(e),l=a>0?t.slice(0,a):t;console.log("Showing ".concat(l.length," out of ").concat(t.length," entries.")),((e,t)=>{const a=document.getElementById("visualization");if(!a)return void console.error("Container not found!");const n=new vis.DataSet(e),l={height:"100%",align:"left",zoomMax:63072e7,zoomMin:864e6,type:t},o=new vis.Timeline(a,n,l);t===k.Range&&(o.on("itemover",e=>{const t=e.item;let a=e.event.target;a.classList.contains("vis-item-content")||(a=a.getElementsByClassName("vis-item-content")[0]);const l=a.parentElement;if(l&&a.clientWidth>l.clientWidth){var o;const e=document.getElementById("tooltip");e.style.display="block",e.innerText=(null===(o=n.get(t))||void 0===o?void 0:o.content)||""}}),a.addEventListener("mousemove",e=>{const t=document.getElementById("tooltip");t.style.left="".concat(e.pageX+10,"px"),t.style.top="".concat(e.pageY+10,"px")}),o.on("itemout",()=>{document.getElementById("tooltip").style.display="none"}))})(l,n),o("")}).catch(e=>o("Error: ".concat(e.message)))):o("Invalid list type: ".concat(t,". Try resubmitting.")))},[o]);const i=l.a.useCallback(()=>t(e=>!e),[]);return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"controls"},l.a.createElement("button",{onClick:i,className:"controls-toggle"},"Controls ",l.a.createElement("span",null,"(toggle)")),e&&l.a.createElement("div",{className:"controls-body"},l.a.createElement("p",null,"Welcome to ",l.a.createElement("strong",null,"MyAnimeTimeline"),"! This tool lets you visualise your MAL anime and manga progress throughout the years."),l.a.createElement(c,{links:[["https://foxypanda.me/my-anime-timeline-and-kuristina/","Article"],["https://github.com/TimboKZ/MyAnimeTimeline","GitHub"],["https://discord.gg/HT4ttdQ","Discord"]]}),l.a.createElement(_,null))),l.a.createElement("div",{id:"visualization"},""!==a&&l.a.createElement("div",{className:"vis-status"},a)),l.a.createElement("div",{id:"tooltip",className:"custom-tooltip"}))};i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(C,null)),document.getElementById("root"))},9:function(e,t,a){e.exports=a(24)}},[[9,1,2]]]);
//# sourceMappingURL=main.6a83055c.chunk.js.map